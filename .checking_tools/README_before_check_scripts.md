
# Checking code in this repository

When the checking script in this directory is `source`d, it will run every "*.R" script in R's current directory and subdirectories, except those with "#" in the name.

It creates a log file in the target directory with the name "#check_<date>.log". For each file, it logs the name of the file, the starting time, any error messages, and the script execution time if greater than 20 secs. When all are done, it records the overall time taken and the output from `sessionInfo()`.

It cleans up the workspace and detaches packages between running scripts.

All graphics produced by the script are saved in a PDF file with the same name. At the end, the workspace is saved in a .RData file, including an object called `sessionInfo` with the output from `sessionInfo()`. These file names end with `#.pdf` or `#.RData` to distinguish them from files generated by the script.

## Installing and updating packages

Before running the scripts, you may want to check that the necessary packages are installed. I suggest first running `update.packages(ask='graphics',checkBuilt=TRUE)` to ensure everything is up to date, including dependencies. You can then install any extra packages needed with:
```
needed <- c("AHMbook", "unmarked", "sp", "rgdal", "raster",
  "lme4", "jagsUI", "devtools", "car", "dichromat", "fitdistrplus", "av", "gifski")
got <- rownames(installed.packages())

( notgot <- needed[!needed %in% got] )

install.packages(notgot)
```

If you want to install latest devel/patched versions of packages from Github, use or adapt the following code:
```
remotes::install_github("mikemeredith/AHMbook")
packageVersion("AHMbook")
remotes::install_github("rbchan/unmarked")
packageVersion("unmarked")
remotes::install_github("kenkellner/jagsUI")
packageVersion("jagsUI")
```
